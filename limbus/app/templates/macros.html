{% macro form_field(field) -%}

    {% set with_label = kwargs.pop('with_label', True) %}
    {% if field.type == 'BooleanField' %}
        <div class="form-check">
            <input class="form-check-input" id="{{ field.id }}" name="{{ field.id }}" type="checkbox">
            <label class="form-check-label" for="{{ field.id }}">
                {{ field.label.text }}{% if field.flags.required %} <span class="imp">(*)</span>{% endif %}:
            </label>
        </div>

    {% elif field.type != 'SubmitField' %}
        <div class="form-group">


        {% if with_label %}
            <label for="{{ field.id }}">
                {{ field.label.text }}{% if field.flags.required %} <span class="imp">(*)</span>{% endif %}:</label>
        {% endif %}

        {% if field.description %}
            <small class="form-text text-muted">{{ field.description }}</small>
        {% endif %}

        {% if field.errors %}
            <div class="alert alert-warning" role="alert">
                <b>Error:</b> {{ field.errors|join(', ') }}
            </div>
        {% endif %}


        {% if field.type == 'StringField' %}
            <input class="form-control" id="{{ field.id }}" name="{{ field.name }}"
                   {% if field.flags.required %}required{% endif %}>
        {% elif field.type == 'RadioField' %}
            <br>
            {% for key, value, bo in field.iter_choices() %}
                 <label class="radio-inline"><input type="radio" name="{{field.id}}" value="{{ key }}" checked></label>
                {{ value }}
            {% endfor %}
        {% elif field.type == 'IntegerField' %}
            <input type="number" class="form-control" id="{{ field.id }}" name="{{ field.name }}"
                   {% if field.flags.required %}required{% endif %}>
        {% elif field.type == 'TextAreaField' %}
            <textarea class="form-control" id="{{ field.id }}" name="{{ field.name }}" rows="3"></textarea>
        {% elif field.type == 'SelectField' %}
            <select class="form-control" id="{{ field.id }}" name="{{ field.name }}">
                {% for key, value, bo in field.iter_choices() %}
                    <option value="{{ key }}">{{ value }}</option>
                {% endfor %}
            </select>
        {% elif field.type  == 'PasswordField' %}
            <input type="password" class="form-control" id="{{ field.id }}" name="{{ field.name }}" required>
        {% elif field.type == 'FileField' %}
            <input type="file" class="form-control-file" id="{{ field.id }}" name="{{ field.name }}"
                   {% if field.flags.required %}required{% endif %}>
        {% elif field.type == 'DateField' %}
            <input type="date" name="{{ field.name }}" id="{{ field.id }}" min="1000-01-01"
                   max="3000-12-31" class="form-control">
        {% endif %}
    {% else %}
        <div style="height: 20px;"></div>
        <button type="submit" class="btn btn-success float-right" id="{{ field.id }}">
            <i class="fa fa-check"></i> {{ field.label.text }}
        </button>
    {% endif %}
{%- endmacro %}


{% macro show_value(attribute, label, type) -%}

    <div class="form-group row">
        <label for="staticEmail" class="col-sm-4 col-form-label">{{ label }}:</label>
        <div class="col-sm-8">
            {% if type == "text" %}
                <input class="form-control" type="text" placeholder="{{ attribute }}" readonly>
            {% elif type == "textarea" %}
                <textarea class="form-control" placeholder="{{ attribute }}" readonly></textarea>
            {% elif type == "enum" %}
                <input class="form-control" type="text" placeholder="{{ attribute }}" readonly>
            {% elif type == "boolean" %}
                <input class="form-control" type="text" placeholder="{{ attribute }}" readonly>
            {% elif type == "datetime" %}
                <input class="form-control" type="text" placeholder="{{ attribute.strftime('%Y-%m-%d') }}" readonly>
            {% endif %}

        </div>
    </div>

{%- endmacro %}

{% macro new_render_form(form) -%}
    {% for element in form %}
        {% if (element.type != "CSRFTokenField") %}
            {{ form_field(element) }}
        {% endif %}
    {% endfor %}
{%- endmacro %}

{% macro render_warning(title, description, button_url, button_text, add, refresh) -%}
<div class="jumbotron jumbotron-fluid">
  <div class="container text-center">
    <h4><i class="fa fa-exclamation-triangle"></i> {{ title }}</h4>
      {% for line in description %}
          <p>{{ line }}</p>
      {% endfor %}
        <a href="{{ url_for( button_url )}}" {% if refresh %}target="_blank"{% endif %}>
            <div class="btn btn-primary">
                {% if add %}<i class="fa fa-plus"></i>{% endif %} {{ button_text }}
            </div>
        </a>
        {% if refresh %}
            <p><i class="fa fa-sync top10"></i> Please refresh this page when completed</p>
        {% endif %}
  </div>
</div>
{%- endmacro %}

{% macro render_progress(now, max) -%}

<div class="progress">
        <div class="progress-bar" role="progressbar" style="width: {{ (now/max)*100 }}%" aria-valuenow="{{ now }}" aria-valuemin="0" aria-valuemax="{{ max }}"></div>
</div>

{%- endmacro %}

{% macro render_success(title, description) -%}
    <div class="jumbotron jumbotron-fluid" style="background-color: #28a745; color: #fff;">
    <div class="container text-center">
        <h4><i class="fa fa-check-circle"></i></h4>
        <h4>{{ title }}</h4>
          <p>{{ description }}</p>

  </div>
</div>
{%- endmacro %}

{% macro render_question(field, count) -%}
    <div class="list-group-item flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">Question {{ count+1 }}</h5>
            <small>
                <input class="form-check-input" id="{{ field.id }}" name="{{ field.id }}" type="checkbox">
            </small>
        </div>
        <p class="mb-1">{{ field.label.text }}</p>
    </div>
{%- endmacro %}


{% macro generate_attribute_select_form(form) -%}

    <table id="selectAttribute" class="table table-striped table-bordered" style="width:100%">
        <thead>
        <tr>
            <th>Attribute Term</th>
            <th>Type</th>
            <th>Required</th>
            <th>Select</th>
        </tr>
        </thead>
        <tbody>
        {% for field in form %}
            {% if field.type == "BooleanField" %}
                <tr>
                    <td>{{ field.label }}</td>
                    <td>{{ field.__dict__ }}</td>
                    <td>{{ field.data }}</td>
                    <td>{{ field }}</td>
                </tr>
            {% endif %}
        {% endfor %}
        </tbody>
    </table>
{%- endmacro %}